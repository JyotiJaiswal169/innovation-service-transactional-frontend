<div class="nhsuk-form-group" [ngClass]="{'nhsuk-form-group--error': hasError}">

  <ng-container *ngIf="label">
    <label class="nhsuk-label" [for]="id">{{ label }}</label>
  </ng-container>

  <ng-container *ngIf="description">
    <div class="nhsuk-hint" id="{{ id }}-hint" [innerHTML]="description"></div>
  </ng-container>

  <ng-container *ngIf="hasError">
    <span class="nhsuk-error-message">
      <span class="nhsuk-u-visually-hidden">Error:</span> {{ errorMessage | translate }}
    </span>
  </ng-container>

  <div [formGroup]="fieldGroupControl" class="nhsuk-checkboxes nhsuk-checkboxes--conditional">

    <ng-container *ngFor="let item of items; let i = index">

      <ng-container [ngSwitch]="item.label">

        <ng-container *ngSwitchCase="'SEPARATOR'">
          <div class="nhsuk-radios__divider">or</div>
        </ng-container>

        <ng-container *ngSwitchDefault>

          <div class="nhsuk-checkboxes__item">
            <ng-container *ngIf="isRunningOnBrowser">
              <input [formControlName]="item.value" id="{{ id }}{{ i }}" type="checkbox" class="nhsuk-checkboxes__input" />
            </ng-container>
            <ng-container *ngIf="isRunningOnServer">
              <input id="{{ id }}{{ i }}" type="checkbox" name="{{ groupName }}[{{item.value}}] }" [value]="true" [checked]="isChecked(item.value)" class="nhsuk-checkboxes__input" />
            </ng-container>
            <label for="{{ id }}{{ i }}" class="nhsuk-label nhsuk-checkboxes__label">{{ item.label }}</label>
            <div *ngIf="description" class="nhsuk-hint nhsuk-checkboxes__hint">{{ item.description }}</div>
          </div>

        </ng-container>

      </ng-container>

    </ng-container>

  </div>

</div>
