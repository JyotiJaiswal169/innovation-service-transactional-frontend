<div class="nhsuk-form-group" [ngClass]="{'nhsuk-form-group--error': hasError}">

  <ng-container *ngIf="label">
    <label class="nhsuk-label" [for]="id">{{ label }}</label>
  </ng-container>

  <ng-container *ngIf="description">
    <div class="nhsuk-hint" id="{{ id }}-hint" [innerHTML]="description"></div>
  </ng-container>

  <ng-container *ngIf="hasError">
    <span class="nhsuk-error-message">
      <span class="nhsuk-u-visually-hidden">Error:</span> {{ errorMessage | translate }}
    </span>
  </ng-container>

  <div class="nhsuk-checkboxes nhsuk-checkboxes--conditional">

    <ng-container *ngFor="let item of items; let i = index">

      <div class="nhsuk-checkboxes__item">

        <ng-container *ngIf="isRunningOnBrowser">
          <input id="{{ id }}{{ i }}" type="checkbox" [value]="item.value" [checked]="isChecked(item.value)" (change)="onChanged($event)" class="nhsuk-checkboxes__input" />
        </ng-container>

        <ng-container *ngIf="isRunningOnServer">
          <input id="{{ id }}{{ i }}" type="checkbox" name="{{ formArrayName }}[]" [value]="item.value" [checked]="isChecked(item.value)" class="nhsuk-checkboxes__input" />
        </ng-container>

        <label for="{{ id }}{{ i }}" class="nhsuk-label nhsuk-checkboxes__label">{{ item.label }}</label>
        <div *ngIf="description" class="nhsuk-hint nhsuk-checkboxes__hint">{{ item.description }}</div>

      </div>

    </ng-container>

  </div>

</div>
