<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">
    <h1 class="nhsuk-heading-m">Innovation record overview</h1>
    <ul class="progressbar nhsuk-u-padding-bottom-2">
      <li *ngFor="let item of sections.progressBar" class="progressbar-item" [ngClass]="{'active': item}"></li>
    </ul>
  </div>
</div>

<div class="nhsuk-grid-row">
  <div *ngIf="sections.submitted > 0" class="nhsuk-grid-column-one-third">
    <h2 class="nhsuk-heading-xl nhsuk-u-margin-bottom-0">{{ sections.submitted }} <span class="nhsuk-u-visually-hidden">sections submitted</span></h2>
    <p>sections submitted</p>
  </div>
  <div *ngIf="sections.draft > 0" class="nhsuk-grid-column-one-third">
    <h2 class="nhsuk-heading-xl nhsuk-u-margin-bottom-0">{{ sections.draft }} <span class="nhsuk-u-visually-hidden">sections in draft</span></h2>
    <p>sections in draft</p>
  </div>
  <div *ngIf="sections.notStarted > 0" class="nhsuk-grid-column-one-third">
    <h2 class="nhsuk-heading-xl nhsuk-u-margin-bottom-0">{{ sections.notStarted }} <span class="nhsuk-u-visually-hidden">sections not started</span></h2>
    <p>sections not started</p>
  </div>
</div>

<ng-container *ngIf="!isInAssessmentStatus()">
  <div class="nhsuk-card nhsuk-u-margin-top-2">
    <div class="nhsuk-card__content">
      <h3>Your next steps</h3>
      <p class="d-flex align-items-center nhsuk-u-margin-bottom-2">
        <ng-container *ngTemplateOutlet="icon; context: { completed: sections.submitted === sections.progressBar.length }"></ng-container>
        Submit all sections of your &nbsp; <a routerLink="/innovator/innovations/{{ innovationId }}/record">innovation record </a>
      </p>
      <p class="d-flex align-items-center">
        <ng-container *ngTemplateOutlet="icon; context: { completed: false }"></ng-container>
        Submit the record for the needs assessment
      </p>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="isInAssessmentStatus()">
  <hr class="nhsuk-section-break nhsuk-section-break--visible nhsuk-u-margin-top-2 nhsuk-u-margin-bottom-3" />
  <h3>Support status</h3>
  <p class="nhsuk-heading-xl nhsuk-u-margin-bottom-0">Awaiting assessment</p>
  <p class="">You can expect the service to get in touch within one week of submitting your record for assessment</p>
</ng-container>


<ng-template #icon let-completed="completed">
  <svg *ngIf="!completed" class="nhsuk-icon nhsuk-icon__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z"></path>
    <path d="M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z"></path>
  </svg>
  <svg *ngIf="completed" class="nhsuk-icon nhsuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12"></path>
  </svg>
</ng-template>