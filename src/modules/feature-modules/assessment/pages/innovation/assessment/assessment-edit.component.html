<ng-container *ngIf="summaryAlert.type">
  <div class="nhsuk-error-summary" [ngClass]="{'border-color-warning': summaryAlert.type === 'warning'}" aria-labelledby="alert-summary-title" role="alert" tabindex="-1">
    <h2 class="nhsuk-error-summary__title" id="alert-summary-title">{{ summaryAlert.title }}</h2>
    <div class="nhsuk-error-summary__body" [innerHTML]="summaryAlert.message"></div>
  </div>
</ng-container>

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-column-full">

    <p class="nhsuk-hint nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">{{ stepId }} of 2</p>
    <h1 class="nhsuk-heading-xl nhsuk-u-margin-bottom-0">Needs assessment</h1>
    <p class="nhsuk-body-l">{{ innovationName }}</p>

    <ng-container *ngFor="let section of form.sections; let i = index">

      <div class="full-width-section" [ngClass]="{'bg-color-white': !(i % 2)}">
        <h2 *ngIf="section.title" class="nhsuk-heading-l nhsuk-u-padding-top-5 nhsuk-u-margin-bottom-0">{{ section.title }}</h2>
        <theme-form-engine [parameters]="section.parameters" [values]="form.data"></theme-form-engine>
      </div>

    </ng-container>

    <div *ngIf="stepId === 2" class="nhsuk-inset-text">
      <span class="nhsuk-u-visually-hidden">Information:</span>
      <p> When you submit, the innovation, along with your needs assessment, will become visible to all organisations that the innovator has chosen to share their data with. </p>
    </div>

    <button *ngIf="stepId === 1" class="nhsuk-button nhsuk-u-margin-top-5 nhsuk-u-margin-right-3" (click)="onSubmit('continue')">Continue</button>
    <button *ngIf="stepId === 2 && assessmentHasBeenSubmitted" class="nhsuk-button nhsuk-u-margin-top-5 nhsuk-u-margin-right-3" (click)="onSubmit('update')">Update needs assessment</button>
    <button *ngIf="stepId === 2 && !assessmentHasBeenSubmitted" class="nhsuk-button nhsuk-u-margin-top-5 nhsuk-u-margin-right-3" (click)="onSubmit('submit')">Submit needs assessment</button>
    <button class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-top-5" (click)="onSubmit('saveAsDraft')">Save as draft</button>

  </div>
</div>
